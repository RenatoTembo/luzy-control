(self.webpackChunkKamiKaze=self.webpackChunkKamiKaze||[]).push([[326],{3326:function(t,e,a){"use strict";a.d(e,{H:function(){return f}});var o=a(6304),n=a(8194),i=a(454),r=a(7085),l=a(1457),s=a(529),d=a(7238),c=a(8619),u=a(2693);let g=(()=>{class t{constructor(t){this.http=t,this.url=s.N.ApiServerUrl,this.param=new URLSearchParams}ngOnInit(){}allAcessoCod(t){return this.http.get(`${this.url}v1/acesso/by-codigo/${t}`)}allPsApartamento(t){return this.http.post(`${this.url}v1/pessoa/by-apartamento`,t)}allAcessoPessoa(t){return this.http.post(`${this.url}v1/acesso/by-pessoa`,t)}salvarPes(t){let e;return null===t.id?e=this.http.post(this.url+"/v1/pessoa/add",t):t.id>0&&(e=this.http.put(this.url+"/v1/pessoa/update",t)),e}salvarAcesso(t){let e;return null===t.id?e=this.http.post(this.url+"/v1/acesso/add",t):t.id>0&&(e=this.http.put(this.url+"/v1/acesso/update",t)),e}saveFile(t,e){const a=new FormData;return a.append("file",t),a.append("nome",e),t?this.http.post(`${this.url}v1/arquivo`,a):null}getPessoa(t,e){return this.http.get(`${this.url}v1/pessoa/by-nome/${t}/${e}`)}getAll(){return this.http.get(`${this.url}v1/condominio`)}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(u.eN))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=a(1116),Z=a(1462);function h(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td",24),c.TgZ(12,"div",25),c.TgZ(13,"i",26),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().editar(e)}),c.qZA(),c._UZ(14,"i",27),c._UZ(15,"i",28),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.Oqu(t.codigo),c.xp6(2),c.Oqu(t.visitante.nome),c.xp6(2),c.Oqu(t.visitante.contacto),c.xp6(2),c.Oqu(t.validade),c.xp6(2),c.Oqu(t.pessoa.nome)}}let m=(()=>{class t{constructor(t){this.adms=t,this.acessos=[],this.ac=(0,n.cloneDeep)(r.wE)}ngOnInit(){this.getAll()}add(){this.ac=(0,n.cloneDeep)(r.wE),this.ac.pessoa=(0,d.g_)("panel")}salvar(t){t.validade=t.validade+":00",this.adms.salvarAcesso(t).subscribe(t=>{this.getAll(),(0,l.Mr)("#md-acesso .md-close")})}editar(t){this.ac=(0,n.cloneDeep)(t),this.ac.id=null,this.ac.validade=this.ac.validade.split(":")[0]+":"+this.ac.validade.split(":")[1]}getAll(){this.adms.allAcessoPessoa((0,d.g_)("panel")).subscribe(t=>{this.acessos=t})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-lib-acesso"]],decls:58,vars:6,consts:[["data-toggle","modals","data-target","#md-acesso",1,"btn","btn-outline-primary","bi","bi-plus","md",2,"margin-top","-40px",3,"click"],[1,"card-body","p-0","card-body-table"],[1,"table","table-sm","table-bordered"],[2,"text-align","center","width","40px"],[1,"bi","bi-grip-horizontal"],[4,"ngFor","ngForOf"],["id","md-acesso",1,"modal","modal-static"],[1,"modal-content",2,"max-width","400px"],[1,"modal-title"],[1,"md-close","close"],[1,"modal-body"],[1,"label-float","label-15"],["type","text","required","",3,"ngModel","ngModelChange"],[1,"flabel"],[1,"row-inline","label-15"],[1,"label-float"],[3,"ngModel","ngModelChange"],["selected","","value","Masculino"],["value","Femenino"],["type","text",3,"ngModel","ngModelChange"],["type","time","required","",3,"ngModel","ngModelChange"],[1,"modal_footer"],[1,"md-close","btn","btn-default"],[1,"btn","btn-outline-primary",3,"click"],[2,"text-align","center"],[1,"option"],["data-toggle","modals","data-target","#md-acesso",1,"bi","bi-pencil-square","md",3,"click"],[1,"bi","bi-plus-square"],[1,"bi","bi-trash"]],template:function(t,e){1&t&&(c.TgZ(0,"button",0),c.NdJ("click",function(){return e.add()}),c._uU(1," Add"),c.qZA(),c.TgZ(2,"div",1),c.TgZ(3,"table",2),c.TgZ(4,"thead"),c.TgZ(5,"tr"),c.TgZ(6,"th"),c._uU(7,"C\xf3digo"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"Nome"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"Contacto"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Hora / Data"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Liberou"),c.qZA(),c.TgZ(16,"th",3),c._UZ(17,"i",4),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"tbody"),c.YNc(19,h,16,5,"tr",5),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"div",6),c.TgZ(21,"div",7),c.TgZ(22,"i",8),c._uU(23,"Cadastro de Morador"),c.qZA(),c.TgZ(24,"i",9),c._uU(25,"\xd7"),c.qZA(),c.TgZ(26,"div",10),c.TgZ(27,"div",11),c.TgZ(28,"input",12),c.NdJ("ngModelChange",function(t){return e.ac.visitante.nome=t}),c.qZA(),c.TgZ(29,"label",13),c._uU(30,"Nome"),c.qZA(),c.qZA(),c.TgZ(31,"div",14),c.TgZ(32,"div",15),c.TgZ(33,"select",16),c.NdJ("ngModelChange",function(t){return e.ac.visitante.genero=t}),c.TgZ(34,"option",17),c._uU(35,"Masculino"),c.qZA(),c.TgZ(36,"option",18),c._uU(37,"Femenino"),c.qZA(),c.qZA(),c.TgZ(38,"label",13),c._uU(39,"G\xe9nero"),c.qZA(),c.qZA(),c.TgZ(40,"div",15),c.TgZ(41,"input",12),c.NdJ("ngModelChange",function(t){return e.ac.visitante.contacto=t}),c.qZA(),c.TgZ(42,"label",13),c._uU(43,"Contacto"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(44,"div",14),c.TgZ(45,"div",15),c.TgZ(46,"input",19),c.NdJ("ngModelChange",function(t){return e.ac.ligarPara=t}),c.qZA(),c.TgZ(47,"label",13),c._uU(48,"Ligar Para"),c.qZA(),c.qZA(),c.TgZ(49,"div",15),c.TgZ(50,"input",20),c.NdJ("ngModelChange",function(t){return e.ac.validade=t}),c.qZA(),c.TgZ(51,"label",13),c._uU(52,"Validade"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(53,"div",21),c.TgZ(54,"button",22),c._uU(55,"Cancelar"),c.qZA(),c.TgZ(56,"button",23),c.NdJ("click",function(){return e.salvar(e.ac)}),c._uU(57,"Salvar"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(19),c.Q6J("ngForOf",e.acessos),c.xp6(9),c.Q6J("ngModel",e.ac.visitante.nome),c.xp6(5),c.Q6J("ngModel",e.ac.visitante.genero),c.xp6(8),c.Q6J("ngModel",e.ac.visitante.contacto),c.xp6(5),c.Q6J("ngModel",e.ac.ligarPara),c.xp6(4),c.Q6J("ngModel",e.ac.validade))},directives:[p.sg,Z.Fj,Z.Q7,Z.JJ,Z.On,Z.EJ,Z.YN,Z.Kr],styles:[""]}),t})();function b(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td",42),c.TgZ(10,"div",43),c.TgZ(11,"i",44),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().editar(e)}),c.qZA(),c._UZ(12,"i",45),c._UZ(13,"i",46),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.Oqu(t.nome),c.xp6(2),c.Oqu(t.genero),c.xp6(2),c.Oqu(t.contacto),c.xp6(2),c.Oqu(t.email)}}function A(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"input",47),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().ps.senha=e}),c.qZA(),c.TgZ(2,"label",24),c._uU(3,"Senha"),c.qZA(),c._UZ(4,"i",48),c.qZA()}if(2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngModel",t.ps.senha)}}let f=(()=>{class t{constructor(t){this.adms=t,this.pessoas=[],this.ps=(0,n.cloneDeep)(r.fV),this.srcp=s.N.src+"condo-1.jpg",this.fileName="",this.podelogar=!1}ngOnInit(){this.getAll()}check(t){setTimeout(()=>{this.podelogar=t.checked},200)}addImage(t){var e=this;let a=t.target.files[0];a?(this.filesSelected=null,(0,l.Kp)(t.target.files[0],1e3,(0,l.hr)(t.target.files[0])).then(t=>{let n=new FileReader;n.readAsDataURL(t),n.onload=function(){var t=(0,o.Z)(function*(t){let o=yield(0,l.e3)(t.target.result,a.name,(0,l.nK)(t.target.result));e.filesSelected=o,e.ps.imagem=t.target.result,e.fileName=(0,l.hr)(o)});return function(e){return t.apply(this,arguments)}}()})):(0,i.Kp)("Nenhum ficheiro foi selecionado.",6e3)}salvar(t){setTimeout(()=>{this.adms.salvarPes(t).subscribe(t=>{void 0!==this.filesSelected?this.adms.saveFile(this.filesSelected,t.nome+"."+this.fileName).subscribe(t=>{this.ps=(0,n.cloneDeep)(r.fV),this.ps.imagem=this.srcp,this.getAll(),(0,l.Mr)("#md-morador .md-close")}):(this.ps.imagem=this.srcp,this.getAll(),(0,l.Mr)("#md-morador .md-close"))})},250)}editar(t){this.ps=(0,n.cloneDeep)(t),this.ps.apartamento=(0,d.g_)("panel").apartamento}add(){this.ps=(0,n.cloneDeep)(r.fV),this.ps.apartamento=(0,d.g_)("panel").apartamento}getAll(){this.adms.allPsApartamento((0,d.g_)("panel").apartamento).subscribe(t=>{this.pessoas=t,(0,d.uG)(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-add-pessoa"]],decls:82,vars:8,consts:[[1,"col-12","col-sm-12"],[1,"card","card-primary","card-outline","card-outline-tabs"],[1,"card-header","p-0","border-bottom-0"],["id","custom-tabs-four-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","custom-tabs-four-apartamento-tab","data-toggle","pill","href","#custom-tabs-four-apartamento","role","tab","aria-controls","custom-tabs-four-apartamento","aria-selected","true",1,"nav-link","active"],["id","custom-tabs-four-profile-tab","data-toggle","pill","href","#custom-tabs-four-profile","role","tab","aria-controls","custom-tabs-four-profile","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","custom-tabs-four-tabContent",1,"tab-content"],["id","custom-tabs-four-apartamento","role","tabpanel","aria-labelledby","custom-tabs-four-apartamento-tab",1,"tab-pane","fade","show","active",2,"background","transparent"],["data-toggle","modals","data-target","#md-morador",1,"btn","btn-outline-primary","bi","bi-plus","md",2,"margin-top","-40px",3,"click"],[1,"card-body","p-0","card-body-table"],[1,"table","table-sm","table-bordered"],[2,"text-align","center","width","40px"],[1,"bi","bi-grip-horizontal"],[4,"ngFor","ngForOf"],["id","custom-tabs-four-profile","role","tabpanel","aria-labelledby","custom-tabs-four-profile-tab",1,"tab-pane","fade",2,"background","transparent"],["id","md-morador",1,"modal","modal-static"],[1,"modal-content",2,"max-width","400px"],[1,"modal-title"],[1,"md-close","close"],[1,"modal-body"],[1,"label-float","label-15"],["type","text","required","",3,"ngModel","ngModelChange"],[1,"flabel"],[1,"row-inline","label-15"],[1,"label-float",2,"margin-top","2px"],[3,"ngModel","ngModelChange"],["selected","","value","Masculino"],["value","Femenino"],[1,"label-float"],[1,"form-group",2,"margin-top","10px","cursor","pointer"],[1,"custom-control","custom-switch","custom-switch-off-danger","custom-switch-on-success"],["type","checkbox","id","customSwitch3",1,"custom-control-input",2,"cursor","pointer",3,"checked"],["chec",""],["for","customSwitch3",1,"custom-control-label",2,"cursor","pointer",3,"click"],["class","label-float",4,"ngIf"],["value","Propriet\xe1rio"],["value","Outro"],[1,"modal_footer"],[1,"md-close","btn","btn-default"],[1,"btn","btn-outline-primary",3,"click"],[2,"text-align","center"],[1,"option"],["data-toggle","modals","data-target","#md-morador",1,"bi","bi-pencil-square","md",3,"click"],[1,"bi","bi-plus-square"],[1,"bi","bi-trash"],["type","password",3,"ngModel","ngModelChange"],[1,"bi","bi-eye-slash-fill"]],template:function(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"ul",3),c.TgZ(4,"li",4),c.TgZ(5,"a",5),c._uU(6,"Moradores Interno"),c.qZA(),c.qZA(),c.TgZ(7,"li",4),c.TgZ(8,"a",6),c._uU(9,"Liberar Acesso"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",7),c.TgZ(11,"div",8),c.TgZ(12,"div",9),c.TgZ(13,"button",10),c.NdJ("click",function(){return e.add()}),c._uU(14," Add"),c.qZA(),c.TgZ(15,"div",11),c.TgZ(16,"table",12),c.TgZ(17,"thead"),c.TgZ(18,"tr"),c.TgZ(19,"th"),c._uU(20,"Nome"),c.qZA(),c.TgZ(21,"th"),c._uU(22,"G\xe9nero"),c.qZA(),c.TgZ(23,"th"),c._uU(24,"Contacto"),c.qZA(),c.TgZ(25,"th"),c._uU(26,"Email"),c.qZA(),c.TgZ(27,"th",13),c._UZ(28,"i",14),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"tbody"),c.YNc(30,b,14,4,"tr",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div",16),c._UZ(32,"app-lib-acesso"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"div",17),c.TgZ(34,"div",18),c.TgZ(35,"i",19),c._uU(36,"Cadastro de Morador"),c.qZA(),c.TgZ(37,"i",20),c._uU(38,"\xd7"),c.qZA(),c.TgZ(39,"div",21),c.TgZ(40,"div",22),c.TgZ(41,"input",23),c.NdJ("ngModelChange",function(t){return e.ps.nome=t}),c.qZA(),c.TgZ(42,"label",24),c._uU(43,"Nome"),c.qZA(),c.qZA(),c.TgZ(44,"div",25),c.TgZ(45,"div",26),c.TgZ(46,"select",27),c.NdJ("ngModelChange",function(t){return e.ps.genero=t}),c.TgZ(47,"option",28),c._uU(48,"Masculino"),c.qZA(),c.TgZ(49,"option",29),c._uU(50,"Femenino"),c.qZA(),c.qZA(),c.TgZ(51,"label",24),c._uU(52,"G\xe9nero"),c.qZA(),c.qZA(),c.TgZ(53,"div",30),c.TgZ(54,"input",23),c.NdJ("ngModelChange",function(t){return e.ps.contacto=t}),c.qZA(),c.TgZ(55,"label",24),c._uU(56,"Contacto"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(57,"div",22),c.TgZ(58,"input",23),c.NdJ("ngModelChange",function(t){return e.ps.email=t}),c.qZA(),c.TgZ(59,"label",24),c._uU(60,"E-mail"),c.qZA(),c.qZA(),c.TgZ(61,"div",31),c.TgZ(62,"div",32),c._UZ(63,"input",33,34),c.TgZ(65,"label",35),c.NdJ("click",function(){c.CHM(t);const a=c.MAs(64);return e.check(a)}),c._uU(66,"Pode acessar o painel ?"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(67,"div",25),c.YNc(68,A,5,1,"div",36),c.TgZ(69,"div",26),c.TgZ(70,"select",27),c.NdJ("ngModelChange",function(t){return e.ps.tipo=t}),c.TgZ(71,"option",37),c._uU(72,"Propriet\xe1rio"),c.qZA(),c.TgZ(73,"option",38),c._uU(74,"Outro"),c.qZA(),c.qZA(),c.TgZ(75,"label",24),c._uU(76,'Tipo "Propriet\xe1rio, Outro"'),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(77,"div",39),c.TgZ(78,"button",40),c._uU(79,"Cancelar"),c.qZA(),c.TgZ(80,"button",41),c.NdJ("click",function(){return e.salvar(e.ps)}),c._uU(81,"Salvar"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(30),c.Q6J("ngForOf",e.pessoas),c.xp6(11),c.Q6J("ngModel",e.ps.nome),c.xp6(5),c.Q6J("ngModel",e.ps.genero),c.xp6(8),c.Q6J("ngModel",e.ps.contacto),c.xp6(4),c.Q6J("ngModel",e.ps.email),c.xp6(5),c.Q6J("checked",e.podelogar),c.xp6(5),c.Q6J("ngIf",1==e.podelogar),c.xp6(2),c.Q6J("ngModel",e.ps.tipo))},directives:[p.sg,m,Z.Fj,Z.Q7,Z.JJ,Z.On,Z.EJ,Z.YN,Z.Kr,p.O5],styles:[""]}),t})()},1457:function(t,e,a){"use strict";function o(t,e,a){return o=URL.createObjectURL(t),n={width:e,heigth:e,type:"image/"+a},function(t,e){return new Promise((a,o)=>{t.src=e,t.completed?a(t):t.addEventListener("load",function(){a(t)}),t.addEventListener("error",o)})}(document.createElement("img"),o).then(t=>{let e=document.createElement("canvas");return n.width&&!n.height?n.height=(null==t?void 0:t.height)*((null==n?void 0:n.width)/t.width):!n.width&&n.height&&(n.width=t.width*(n.height/t.height)),Object.assign(e,n),e.getContext("2d").drawImage(t,0,0,e.width,e.height),new Promise(function(t){e.toBlob(t,n.type||"image/png",n.quality)})});var o,n}function n(t,e,a){return fetch(t).then(t=>t.arrayBuffer()).then(t=>new File([t],e,{type:a}))}function i(t){var e=null;if("string"!=typeof t)return e;var a=t.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);return a&&a.length&&(e=a[1]),e}function r(t){let e=t.type.split("/")[1];return"jpeg"===e?"JPG":e}function l(t){let e=t.split(";")[0].split("/")[1];return"jpeg"===e?"jpg":e}function s(t){let e=document.querySelector(t);null==e||e.click()}a.d(e,{Kp:function(){return o},e3:function(){return n},nK:function(){return i},hr:function(){return r},gU:function(){return l},Mr:function(){return s}})},6304:function(t,e,a){"use strict";function o(t,e,a,o,n,i,r){try{var l=t[i](r),s=l.value}catch(d){return void a(d)}l.done?e(s):Promise.resolve(s).then(o,n)}function n(t){return function(){var e=this,a=arguments;return new Promise(function(n,i){var r=t.apply(e,a);function l(t){o(r,n,i,l,s,"next",t)}function s(t){o(r,n,i,l,s,"throw",t)}l(void 0)})}}a.d(e,{Z:function(){return n}})}}]);